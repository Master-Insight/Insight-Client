---
const aProps = Astro.props;
const { item, slug, page } = aProps;
const {
  title,
  characteristics,
  tags,
  description,
  image,
  images,
  service,
  staff,
  deploy,
} = item;
---

<div
  class="sample-card w-full md:w-[45%] lg:w-[30%] p-6 bg-white rounded-3xl shadow-lg flex flex-col gap-4 hover:shadow-xl transition-shadow"
  data-category={aProps["data-category"]}
>
  <!-- Imagen del sample -->
  <img
    src={image || images[0]}
    alt={`Imagen de ${title}`}
    class="h-40 w-full object-cover rounded-lg"
  />

  <!-- Información del sample -->
  <div class="flex flex-col justify-between flex-1">
    <div>
      <!-- Título -->
      <h3 class="font-bold text-xl text-primary mb-2">{title}</h3>

      <!-- Descripción -->
      <p class="text-gray-700 mb-4 description-clamp text-justify">
        {description}
      </p>

      <!-- Características -->
      <ul class="text-sm text-gray-600 mb-4 list-disc pl-5">
        {
          characteristics &&
            characteristics
              .split(", ")
              .map((feature, index) => <li key={index}>{feature}</li>)
        }
      </ul>

      <!-- Etiquetas -->
      <div class="flex flex-wrap gap-2 mt-2 justify-center">
        {
          tags &&
            tags.map((tag, index) => (
              <span
                key={index}
                class="px-2 py-1 bg-blue-100 text-blue-600 text-xs rounded-full"
              >
                {tag}
              </span>
            ))
        }
      </div>

      <!-- Staff -->
      <div class="text-sm text-gray-600 mt-4">
        <strong>Equipo:</strong>
        {staff?.join(", ") || "N/A"}
      </div>
    </div>

    <!-- Botón para más detalles -->
    <div class="mx-auto mt-4 flex flex-col gap-2">
      <a
        href={`/${page}/${slug}`}
        class="w-full text-center px-4 py-2 bg-primary text-white font-semibold rounded-xl hover:bg-primary-dark transition-colors"
      >
        Ver Detalles
      </a>
      {
        deploy && (
          <a
            href={deploy}
            target="_blank"
            class="w-full text-center px-4 py-2 bg-secondary text-white font-semibold rounded-xl hover:bg-secondary-dark transition-colors"
          >
            Ver en Vivo
          </a>
        )
      }
    </div>
  </div>
</div>

<style>
  .description-clamp {
    display: -webkit-box;
    -webkit-line-clamp: 7;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
